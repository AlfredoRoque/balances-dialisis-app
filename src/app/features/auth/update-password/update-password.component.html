<section class="update-shell">
  <mat-card class="update-card">
    <header class="page-header">
      <div>
        <p class="eyebrow">Seguridad</p>
        <h1>Actualizar contraseña</h1>
        <p class="subtitle">Protege tu acceso cambiando periódicamente tu contraseña.</p>
        <p class="subtitle-note">NOTA: al cambiar tu contraseña, se cerrará tu sesión actual y deberás iniciar sesión nuevamente.</p>
      </div>
      <div class="header-actions">
        <app-logout-button></app-logout-button>
      </div>
    </header>

    <form class="password-form" [formGroup]="form" (ngSubmit)="submit()">
      <mat-form-field appearance="outline">
        <mat-label class="input-label">Contraseña actual</mat-label>
        <input matInput class="input-content" type="password" formControlName="currentPassword" autocomplete="current-password">
        <mat-error *ngIf="form.get('currentPassword')?.hasError('required')">
          Ingresa tu contraseña actual.
        </mat-error>
        <mat-error *ngIf="form.get('currentPassword')?.hasError('minlength')">
          Debe tener al menos 6 caracteres.
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label class="input-label">Nueva contraseña</mat-label>
        <input matInput class="input-content" type="password" formControlName="newPassword" autocomplete="new-password">
        <mat-error *ngIf="form.get('newPassword')?.hasError('required')">
          Ingresa una nueva contraseña.
        </mat-error>
        <mat-error *ngIf="form.get('newPassword')?.hasError('minlength')">
          Debe tener al menos 6 caracteres.
        </mat-error>
        <mat-error *ngIf="form.get('newPassword')?.hasError('sameAsCurrent')">
          Debe ser diferente a la contraseña actual.
        </mat-error>
      </mat-form-field>

      <div class="form-actions">
        <button mat-stroked-button type="button" (click)="goBack()">Cancelar</button>
        <button mat-flat-button color="primary" type="submit" [disabled]="form.invalid || submitting">
          <mat-icon>lock_reset</mat-icon>
          {{ submitting ? 'Actualizando...' : 'Actualizar contraseña' }}
        </button>
      </div>
    </form>
  </mat-card>
</section>
